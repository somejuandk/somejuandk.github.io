<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-T">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
    <script src="Analyzer Module/analyzer.js" defer></script>
    <script src="Analyzer Module/analyzer-correlations.js" defer></script>
    <script src="Analyzer Module/analyzer-simulation.js" defer></script>
    <script src="Analyzer Module/analyzer-best-worst.js" defer></script>
    <script src="Analyzer Module/analyzer-graph-analysis.js" defer></script>
    <script src="Analyzer Module/analyzer-granulation.js" defer></script>
    <script src="backendcorr.js" defer></script>
    <script src="Tools Module/percentage.js" defer></script>
    <script src="budgetpacer.js" defer></script>
    <script src="Tools Module/schreiber.js" defer></script>
    <script src="simulator.js" defer></script>
    <script src="incremental-reach.js" defer></script>
    <script src="roas-goal-setter.js" defer></script>
    <script src="pitch-assistant.js" defer></script>
    <script src="Tools Module/tools.js" defer></script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="text-gray-800">
    <div id="app-switcher-modal" class="fixed inset-0 z-50 hidden items-start justify-center">
        <div id="app-switcher-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
        <div class="relative w-full h-full flex flex-col items-center justify-center">
            <div id="app-switcher-greeting" class="absolute top-0 left-0 right-0 p-6 hidden bg-blue-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                   <h1 id="app-switcher-greeting-text" class="text-3xl font-bold text-slate-800"></h1>
                   <p id="app-switcher-user-position-text" class="text-lg text-slate-600"></p>
               </div>
           </div>
            <button id="app-switcher-close" class="absolute top-8 right-8 text-gray-600/70 hover:text-gray-900 text-5xl font-light z-10 w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            <nav id="app-switcher-nav" class="flex flex-col">
                <a href="#" data-app="analyzer">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"></path></svg>
                    <span>Performance Analyzer</span>
                </a>
                <a href="#" data-app="tools">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.471-2.471a.563.563 0 0 1 .801 0l3.744 3.744a.563.563 0 0 1 0 .801l-2.471 2.471m0 0-.566.566a2.25 2.25 0 0 1-3.182 0l-1.485-1.485A2.25 2.25 0 0 1 6.5 13.5v-1.5a.563.563 0 0 1 .563-.563h1.5a2.25 2.25 0 0 1 2.25 2.25v5.877a2.652 2.652 0 0 0-2.652-2.652h-1.5a.563.563 0 0 0-.563.563v1.5a2.25 2.25 0 0 0 2.25 2.25h1.5m-3-9.477A2.25 2.25 0 0 1 8 3.75v-1.5a.563.563 0 0 1 .563-.563h1.5a2.25 2.25 0 0 1 2.25 2.25v1.5" /></svg>
                    <span>Tools</span>
                </a>
                <a href="#" data-app="backend-correlations">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244" /></svg>
                    <span>Backend Correlations</span>
                </a>
                 <a href="#" data-app="roas-goal-setter">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 11l19-9-9 19-2-8-8-2z" /></svg>
                    <span>ROAS Goal Setter</span>
                </a>
                <a href="#" data-app="budget-pacer">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <span>Budget Pacer</span>
                </a>
                <a href="#" data-app="simulator">
                     <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 22.5l-.648-1.938a3.375 3.375 0 00-2.684-2.684L11.25 18l1.938-.648a3.375 3.375 0 002.684-2.684L16.25 13.5l.648 1.938a3.375 3.375 0 002.684 2.684L21.75 18l-1.938.648a3.375 3.375 0 00-2.684 2.684z"></path></svg>
                    <span>Simulator</span>
                </a>
                <a href="#" data-app="incremental-reach">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 8.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v8.25A2.25 2.25 0 006 16.5h2.25m8.25-8.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-7.5A2.25 2.25 0 018.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 00-2.25 2.25v6" /></svg>
                    <span>Incremental Reach</span>
                </a>
                <a href="#" data-app="pitch-assistant">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h12M3.75 3h16.5M3.75 3v1.5M16.5 3v1.5M3.75 16.5h16.5M16.5 16.5v3.75A2.25 2.25 0 0114.25 22.5h-4.5A2.25 2.25 0 017.5 20.25V16.5" /></svg>
                    <span>Pitch Assistant</span>
                </a>
            </nav>
        </div>
    </div>

    <div id="main-content" class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 pb-24">
        <div id="main-header-bar" class="glass-container rounded-xl h-16 mb-8 flex items-center justify-between px-6">
            <div class="flex items-center gap-4">
                <div id="main-header-icon">
                    <!-- Icon will be injected by JS -->
                </div>
                <h1 id="main-header-title" class="text-3xl font-bold text-gray-900"></h1>
            </div>
            <div class="flex items-center gap-4 text-xs">
                <div id="status-system" class="status-indicator" data-tooltip="Overall System: Pending">
                    <span class="status-icon-wrapper">
                        <svg class="status-icon-success hidden h-3 w-3 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" /></svg>
                        <svg class="status-icon-failure hidden h-3 w-3 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                    </span>
                    <span class="status-label">System</span>
                </div>
                <div id="status-storage" class="status-indicator" data-tooltip="Local Storage: Pending">
                    <span class="status-icon-wrapper">
                        <svg class="status-icon-success hidden h-3 w-3 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" /></svg>
                        <svg class="status-icon-failure hidden h-3 w-3 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                    </span>
                    <span class="status-label">Storage</span>
                </div>
                <div id="status-scripts" class="status-indicator" data-tooltip="Scripts: Pending">
                    <span class="status-icon-wrapper">
                        <svg class="status-icon-success hidden h-3 w-3 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" /></svg>
                        <svg class="status-icon-failure hidden h-3 w-3 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                    </span>
                    <span class="status-label">Scripts</span>
                </div>
                <button id="file-library-btn" class="hidden opacity-0" style="transition: opacity 0.3s ease-in-out;">
                    <div class="flex items-center text-sm font-medium bg-[#5248e2] text-white rounded-full px-4 py-2 hover:bg-indigo-700 shadow-sm transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                        </svg>
                        File Library
                    </div>
                </button>
            </div>
        </div>
        <div id="app" class="relative">

            <div id="dashboard-view" class="main-view fade-in">
                <header class="text-center mb-12">
                    <h1 class="text-4xl font-bold text-gray-900">Select an Application</h1>
                    <p class="text-gray-600 mt-2 text-lg">Pick a tool to get started.</p>
                </header>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-5xl mx-auto">
                    <a href="#" data-app="analyzer" class="app-card group glass-container flex flex-col items-center justify-center p-12 rounded-2xl text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mb-4 card-icon transition-all duration-300 group-hover:scale-105"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"></path></svg>
                        <span class="text-xl font-semibold card-title">Performance Analyzer</span>
                        <p class="mt-3 text-sm card-description leading-relaxed">Analyze ad spend data, simulate budgets, and uncover key performance correlations to optimize your campaigns.</p>
                    </a>
                    <a href="#" data-app="tools" class="app-card group glass-container flex flex-col items-center justify-center p-12 rounded-2xl text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mb-4 card-icon transition-all duration-300 group-hover:scale-105"><path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.471-2.471a.563.563 0 0 1 .801 0l3.744 3.744a.563.563 0 0 1 0 .801l-2.471 2.471m0 0-.566.566a2.25 2.25 0 0 1-3.182 0l-1.485-1.485A2.25 2.25 0 0 1 6.5 13.5v-1.5a.563.563 0 0 1 .563-.563h1.5a2.25 2.25 0 0 1 2.25 2.25v5.877a2.652 2.652 0 0 0-2.652-2.652h-1.5a.563.563 0 0 0-.563.563v1.5a2.25 2.25 0 0 0 2.25 2.25h1.5m-3-9.477A2.25 2.25 0 0 1 8 3.75v-1.5a.563.563 0 0 1 .563-.563h1.5a2.25 2.25 0 0 1 2.25 2.25v1.5" /></svg>
                        <span class="text-xl font-semibold card-title">Tools</span>
                        <p class="mt-3 text-sm card-description leading-relaxed">A collection of useful utilities for calculations and conversions.</p>
                    </a>
                    <a href="#" data-app="backend-correlations" class="app-card group glass-container flex flex-col items-center justify-center p-12 rounded-2xl text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mb-4 card-icon transition-all duration-300 group-hover:scale-105"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244" /></svg>
                        <span class="text-xl font-semibold card-title">Backend Correlations</span>
                        <p class="mt-3 text-sm card-description leading-relaxed">Connect platform ad spend with your Shopify data to uncover powerful backend correlations.</p>
                    </a>
                    <a href="#" data-app="roas-goal-setter" class="app-card group glass-container flex flex-col items-center justify-center p-12 rounded-2xl text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mb-4 card-icon transition-all duration-300 group-hover:scale-105"><path stroke-linecap="round" stroke-linejoin="round" d="M3 11l19-9-9 19-2-8-8-2z" /></svg>
                        <span class="text-xl font-semibold card-title">ROAS Goal Setter</span>
                        <p class="mt-3 text-sm card-description leading-relaxed">Set ROAS goals, calculate max CPA/CPC, and understand profitability drivers.</p>
                    </a>
                    <a href="#" data-app="budget-pacer" class="app-card group glass-container flex flex-col items-center justify-center p-12 rounded-2xl text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mb-4 card-icon transition-all duration-300 group-hover:scale-105"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        <span class="text-xl font-semibold card-title">Budget Pacer</span>
                        <p class="mt-3 text-sm card-description leading-relaxed">Track and project your monthly ad spend to stay on budget.</p>
                    </a>
                    <a href="#" data-app="simulator" class="app-card group glass-container flex flex-col items-center justify-center p-12 rounded-2xl text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mb-4 card-icon transition-all duration-300 group-hover:scale-105"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 22.5l-.648-1.938a3.375 3.375 0 00-2.684-2.684L11.25 18l1.938-.648a3.375 3.375 0 002.684-2.684L16.25 13.5l.648 1.938a3.375 3.375 0 002.684 2.684L21.75 18l-1.938.648a3.375 3.375 0 00-2.684 2.684z"></path></svg>
                        <span class="text-xl font-semibold card-title">Simulator</span>
                        <p class="mt-3 text-sm card-description leading-relaxed">Estimate performance changes based on budget adjustments using historical data.</p>
                    </a>
                    <a href="#" data-app="incremental-reach" class="app-card group glass-container flex flex-col items-center justify-center p-12 rounded-2xl text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mb-4 card-icon transition-all duration-300 group-hover:scale-105"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 8.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v8.25A2.25 2.25 0 006 16.5h2.25m8.25-8.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-7.5A2.25 2.25 0 018.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 00-2.25 2.25v6"></path></svg>
                        <span class="text-xl font-semibold card-title">Incremental Reach</span>
                        <p class="mt-3 text-sm card-description leading-relaxed">Calculate and visualize the de-duplicated reach of your campaigns over time.</p>
                    </a>
                     <a href="#" data-app="pitch-assistant" class="app-card group glass-container flex flex-col items-center justify-center p-12 rounded-2xl text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mb-4 card-icon transition-all duration-300 group-hover:scale-105"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h12M3.75 3h16.5M3.75 3v1.5M16.5 3v1.5M3.75 16.5h16.5M16.5 16.5v3.75A2.25 2.25 0 0114.25 22.5h-4.5A2.25 2.25 0 017.5 20.25V16.5"></path></svg>
                        <span class="text-xl font-semibold card-title">Pitch Assistant</span>
                        <p class="mt-3 text-sm card-description leading-relaxed">Generate key insights and visualizations for client pitches.</p>
                    </a>
                </div>
            </div>

            <div id="analyzer-view" class="main-view is-inactive relative">
                 <aside id="analyzer-sidebar" class="fixed top-4 left-4 bottom-[4.5rem] w-72 glass-container p-8 z-30 rounded-2xl overflow-y-auto">
                    <div class="flex items-center mb-10">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 mr-3 text-[#5248e2]">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" />
                        </svg>
                        <h2 class="text-2xl font-bold text-[#5248e2]">Analysis Tools</h2>
                    </div>
                     <nav class="space-y-6">
                         <button id="correlations-btn" class="w-full text-left block data-dependent">
                             <span class="font-bold text-slate-800 text-lg">Correlations</span>
                             <span class="block text-sm status-text text-red-500 mt-1">Upload data to proceed</span>
                         </button>
                         <button id="simulation-btn" class="w-full text-left block data-dependent">
                             <span class="font-bold text-slate-800 text-lg">Simulation</span>
                             <span class="block text-sm status-text text-red-500 mt-1">Upload data to proceed</span>
                         </button>
                         <button id="best-worst-btn" class="w-full text-left block data-dependent">
                             <span class="font-bold text-slate-800 text-lg">Best/Worst Periods</span>
                             <span class="block text-sm status-text text-red-500 mt-1">Upload data to proceed</span>
                         </button>
                         <button id="graph-analysis-btn" class="w-full text-left block data-dependent">
                             <span class="font-bold text-slate-800 text-lg">Graph Analysis</span>
                             <span class="block text-sm status-text text-red-500 mt-1">Upload data to proceed</span>
                         </button>
                          <button id="granulate-btn" class="w-full text-left block data-dependent">
                             <span class="font-bold text-slate-800 text-lg">Granulate</span>
                             <span class="block text-sm status-text text-red-500 mt-1">Upload data to proceed</span>
                         </button>
                     </nav>
                 </aside>

                <main id="analyzer-main-content" class="transition-transform duration-300">
                    <header class="mb-8 flex justify-between items-center">
                        <button id="menu-open-btn-analyzer" class="p-2 rounded-full hover:bg-gray-200/50 hidden">
                             <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                        </button>
                        <p class="text-gray-600 mt-1">Upload your Meta Ads report to automatically calculate key metrics.</p>
                        <button class="back-to-dashboard-btn flex items-center text-sm font-medium bg-white text-[#5248e2] border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-100 transition-colors shadow-sm">
                           <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" transform="scale(-1, 1) translate(-24, 0)"></path></svg>
                           Back to app overview
                        </button>
                    </header>

                    <div class="glass-container p-6 rounded-xl">
                        <div id="file-drop-zone" class="data-upload-zone p-8 text-center rounded-xl cursor-pointer">
                            <input type="file" id="meta-file-input" class="hidden" accept=".csv">
                            <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4 4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>
                            <p class="mt-4 text-sm text-gray-600"><span class="font-semibold text-[#5248e2]">Upload a file</span> or drag and drop</p>
                            <p class="text-xs text-gray-500">CSV files exported from Meta Ads</p>
                        </div>
                    </div>

                    <div id="analyzer-summary" class="hidden mt-8"></div>
                    
                    <div id="analyzer-dashboard-content" class="hidden mt-8">
                        <!-- Time Aggregation Controls -->
                        <div class="flex justify-center items-center space-x-2 mb-6">
                            <span class="text-sm font-medium text-gray-600">Aggregate by:</span>
                            <div id="analyzer-dashboard-time-aggregation-controls" class="inline-flex rounded-md shadow-sm" role="group">
                                <button type="button" data-period="Daily" class="time-agg-btn active px-4 py-2 text-sm font-medium rounded-l-full">Daily</button>
                                <button type="button" data-period="Weekly" class="time-agg-btn px-4 py-2 text-sm font-medium">Weekly</button>
                                <button type="button" data-period="Monthly" class="time-agg-btn px-4 py-2 text-sm font-medium rounded-r-full">Monthly</button>
                            </div>
                        </div>

                        <!-- Charts Container -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                            <div class="glass-container p-4 rounded-xl h-96"><canvas id="analyzer-scatter-chart"></canvas></div>
                            <div class="glass-container p-4 rounded-xl h-96"><canvas id="analyzer-spend-chart"></canvas></div>
                        </div>

                        <!-- Top 5 Periods Container -->
                        <div id="analyzer-top5-container" class="glass-container p-6 rounded-xl">
                            <div class="flex justify-between items-center mb-4">
                                <div>
                                    <label for="analyzer-top5-metric-select" class="text-sm font-medium text-gray-600 mr-2">Analyze by Metric:</label>
                                    <select id="analyzer-top5-metric-select" class="styled-select rounded-full p-2"></select>
                                </div>
                            </div>
                            <div id="analyzer-top5-table-wrapper">
                                <!-- Table will be injected here -->
                            </div>
                        </div>
                    </div>

                    <div id="analyzer-controls" class="hidden mt-6 text-center"></div>
                    <div id="analyzer-results" class="hidden mt-6"></div>
                </main>
            </div>

            <div id="tools-view" class="main-view is-inactive relative">
                <main id="tools-main-content">
                    <header class="mb-8 flex justify-between items-start">
                        <p class="text-gray-600">A collection of useful utilities.</p>
                        <button class="back-to-dashboard-btn flex items-center text-sm font-medium bg-white text-[#5248e2] border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-100 transition-colors shadow-sm">
                           <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" transform="scale(-1, 1) translate(-24, 0)"></path></svg>
                           Back to app overview
                        </button>
                    </header>
            
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <button id="time-day-converter-btn" class="w-full text-left block p-6 glass-container rounded-xl hover:bg-white/80 dark:hover:bg-gray-900/80 transition-all duration-300 hover:scale-105 hover:shadow-lg">
                             <span class="font-bold text-slate-800 text-lg">Time & Day Converter</span>
                             <span class="block text-sm status-text text-purple-ready mt-1">Ready to use</span>
                         </button>
                         <button id="percentage-calculator-btn" class="w-full text-left block p-6 glass-container rounded-xl hover:bg-white/80 dark:hover:bg-gray-900/80 transition-all duration-300 hover:scale-105 hover:shadow-lg">
                            <span class="font-bold text-slate-800 text-lg">Percentage Calculator</span>
                            <span class="block text-sm status-text text-purple-ready mt-1">Ready to use</span>
                        </button>
                        <button id="schreiber-tool-btn" class="w-full text-left block p-6 glass-container rounded-xl hover:bg-white/80 dark:hover:bg-gray-900/80 transition-all duration-300 hover:scale-105 hover:shadow-lg">
                            <span class="font-bold text-slate-800 text-lg">Schreiber Tool</span>
                            <span class="block text-sm status-text text-purple-ready mt-1">Ready to use</span>
                        </button>
                    </div>
                </main>
            </div>

            <div id="backend-correlations-view" class="main-view is-inactive">
                <header class="mb-8 flex justify-between items-center">
                    <p class="text-gray-600 mt-1">Upload Shopify, Meta, and Google data to find performance correlations.</p>
                    <button class="back-to-dashboard-btn flex items-center text-sm font-medium bg-white text-[#5248e2] border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-100 transition-colors shadow-sm">
                       <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" transform="scale(-1, 1) translate(-24, 0)"></path></svg>
                       Back to app overview
                    </button>
                </header>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                    <!-- Shopify Drop Zone -->
                    <div class="glass-container p-6 rounded-xl">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">Shopify Data</h3>
                        <div id="shopify-drop-zone" class="data-upload-zone p-8 text-center rounded-xl cursor-pointer">
                            <input type="file" id="shopify-file-input" class="hidden" accept=".csv">
                            <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4 4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                            <p class="mt-4 text-sm text-gray-600"><span class="font-semibold text-[#5248e2]">Upload Orders CSV</span> or drag &amp; drop</p>
                            <p id="shopify-file-status" class="text-xs text-gray-500 mt-1">No file uploaded</p>
                        </div>
                    </div>
                    <!-- Meta Drop Zone -->
                    <div class="glass-container p-6 rounded-xl">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">Meta Ads Data</h3>
                        <div id="meta-correlations-drop-zone" class="data-upload-zone p-8 text-center rounded-xl cursor-pointer">
                            <input type="file" id="meta-correlations-file-input" class="hidden" accept=".csv">
                            <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4 4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                            <p class="mt-4 text-sm text-gray-600"><span class="font-semibold text-[#5248e2]">Upload Ads Report</span> or drag &amp; drop</p>
                            <p id="meta-correlations-file-status" class="text-xs text-gray-500 mt-1">No file uploaded</p>
                        </div>
                    </div>
                    <!-- Google Drop Zone -->
                    <div class="glass-container p-6 rounded-xl">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">Google Ads Data</h3>
                        <div id="google-correlations-drop-zone" class="data-upload-zone p-8 text-center rounded-xl cursor-pointer">
                            <input type="file" id="google-correlations-file-input" class="hidden" accept=".csv">
                            <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4 4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                            <p class="mt-4 text-sm text-gray-600"><span class="font-semibold text-[#5248e2]">Upload Ads Report</span> or drag &amp; drop</p>
                            <p id="google-correlations-file-status" class="text-xs text-gray-500 mt-1">No file uploaded</p>
                        </div>
                    </div>
                </div>
                <div id="backend-correlations-scorecards" class="hidden grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                    <!-- Shopify Scorecard -->
                    <div id="shopify-scorecard" class="glass-container p-6 rounded-xl text-center hidden">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Shopify Summary</h3>
                        <p class="text-sm text-gray-600">Total Orders</p>
                        <p id="shopify-total-orders" class="text-3xl font-bold text-gray-900 mt-1">-</p>
                        <p class="text-xs text-gray-500 mt-2"><strong id="shopify-avg-orders">-</strong> avg. orders / day</p>
                        <div class="h-20 mt-4 -mb-2"><canvas id="shopify-scorecard-chart"></canvas></div>
                    </div>
                    <!-- Meta Scorecard -->
                    <div id="meta-scorecard" class="glass-container p-6 rounded-xl text-center hidden">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Meta Summary</h3>
                        <p class="text-sm text-gray-600">Total Transactions</p>
                        <p id="meta-total-transactions" class="text-3xl font-bold text-gray-900 mt-1">-</p>
                        <p class="text-xs text-gray-500 mt-2"><strong id="meta-avg-transactions">-</strong> avg. transactions / day</p>
                        <div class="h-20 mt-4 -mb-2"><canvas id="meta-scorecard-chart"></canvas></div>
                    </div>
                    <!-- Google Scorecard -->
                    <div id="google-scorecard" class="glass-container p-6 rounded-xl text-center hidden">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Google Summary</h3>
                        <p class="text-sm text-gray-600">Total Transactions</p>
                        <p id="google-total-transactions" class="text-3xl font-bold text-gray-900 mt-1">-</p>
                        <p class="text-xs text-gray-500 mt-2"><strong id="google-avg-transactions">-</strong> avg. transactions / day</p>
                        <div class="h-20 mt-4 -mb-2"><canvas id="google-scorecard-chart"></canvas></div>
                    </div>
                </div>
                <div id="backend-correlations-filters" class="hidden glass-container p-4 rounded-xl mb-8">
                    <div class="flex flex-wrap items-center gap-6 justify-between">
                        <div>
                            <label for="backend-correlations-period-type" class="block text-sm font-medium text-gray-600 mb-1">Filter by Period:</label>
                            <div id="backend-correlations-period-type" class="inline-flex rounded-full shadow-sm" role="group">
                            <button type="button" data-period-type="all" class="time-agg-btn active px-4 py-2 text-sm font-medium rounded-l-full">All Time</button>
                            <button type="button" data-period-type="monthly" class="time-agg-btn px-4 py-2 text-sm font-medium">Monthly</button>
                            <button type="button" data-period-type="quarterly" class="time-agg-btn px-4 py-2 text-sm font-medium">Quarterly</button>
                            <button type="button" data-period-type="yearly" class="time-agg-btn px-4 py-2 text-sm font-medium rounded-r-full">Yearly</button>
                            </div>
                        </div>
                        <div id="backend-correlations-period-select-container">
                            <!-- Dropdown will be injected here by script.js -->
                        </div>
                    </div>
                </div>
                <div id="backend-correlations-results" class="hidden mt-8">
                    <div class="glass-container p-6 rounded-xl">
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Correlation Analysis</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-start">
                            <div>
                                <label for="backend-metric-select" class="block text-sm font-medium text-gray-600">Compare Shopify Orders with:</label>
                                <select id="backend-metric-select" class="styled-select mt-1 block w-full rounded-full p-2"></select>
                            </div>
                            <div class="md:col-span-2 grid grid-cols-1 gap-6">
                                <!-- Overall Correlation -->
                                <div class="text-center p-4 bg-gray-100/30 rounded-lg">
                                    <p class="text-sm text-gray-600">Overall Correlation (Meta + Google)</p>
                                    <p id="backend-correlation-value" class="text-4xl font-bold text-gray-900 my-2">0.00</p>
                                    <div class="relative w-full h-4 bg-gray-200 rounded-full correlation-graph-bar mt-4 max-w-md mx-auto">
                                        <div id="backend-correlation-marker" class="absolute top-1/2 -translate-y-1/2 w-5 h-5 bg-white rounded-full border-2 border-[#5248e2]" style="left: 50%;"></div>
                                        <div class="absolute w-full flex justify-between text-xs text-gray-500 px-1 -bottom-5">
                                            <span>-1</span>
                                            <span>0</span>
                                            <span>+1</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- Meta Correlation -->
                                    <div id="meta-correlation-container" class="text-center p-4 bg-gray-100/30 rounded-lg hidden">
                                        <p class="text-sm text-gray-600">Meta vs Shopify Correlation</p>
                                        <p id="meta-correlation-value" class="text-2xl font-bold text-gray-900 my-1">0.00</p>
                                        <div class="relative w-full h-3 bg-gray-200 rounded-full correlation-graph-bar mt-2 max-w-xs mx-auto">
                                            <div id="meta-correlation-marker" class="absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full border-2 border-[#5248e2]" style="left: 50%;"></div>
                                        </div>
                                    </div>
                                    <!-- Google Correlation -->
                                    <div id="google-correlation-container" class="text-center p-4 bg-gray-100/30 rounded-lg hidden">
                                        <p class="text-sm text-gray-600">Google vs Shopify Correlation</p>
                                        <p id="google-correlation-value" class="text-2xl font-bold text-gray-900 my-1">0.00</p>
                                        <div class="relative w-full h-3 bg-gray-200 rounded-full correlation-graph-bar mt-2 max-w-xs mx-auto">
                                            <div id="google-correlation-marker" class="absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full border-2 border-[#5248e2]" style="left: 50%;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="backend-correlation-charts-container" class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-6" style="height: 400px;">
                            <div><canvas id="backend-orders-chart"></canvas></div>
                            <div><canvas id="backend-metric-chart"></canvas></div>
                        </div>
                        <div id="backend-correlation-table-container" class="mt-8">
                        </div>
                    </div>
                </div>
            </div>

             <div id="budget-pacer-view" class="main-view is-inactive">
                <header class="mb-8 flex justify-between items-center">
                    <p class="text-gray-600 mt-1">Track your spend and project month-end results.</p>
                    <button class="back-to-dashboard-btn flex items-center text-sm font-medium bg-white text-[#5248e2] border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-100 transition-colors shadow-sm">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" transform="scale(-1, 1) translate(-24, 0)"></path></svg>
                        Back to app overview
                    </button>
                </header>
                <div class="glass-container p-6 rounded-xl">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-1 space-y-4">
                            <div>
                                <h4 class="text-lg font-semibold text-gray-800">Inputs</h4>
                                <div class="space-y-3 mt-2">
                                    <div>
                                        <label for="pacing-budget" class="block text-sm font-medium text-gray-600">Total Monthly Budget (DKK)</label>
                                        <input type="number" id="pacing-budget" class="styled-input mt-1 block w-full rounded-full p-2" value="100000">
                                    </div>
                                    <div>
                                        <label for="pacing-branding-slider" class="block text-sm font-medium text-gray-600 flex justify-between">
                                            <span>Branding %</span><span id="pacing-branding-value">20%</span>
                                        </label>
                                        <input id="pacing-branding-slider" type="range" min="0" max="100" value="20" class="styled-range w-full mt-2">
                                    </div>
                                </div>
                            </div>
                            <div class="border-t border-gray-200/50 pt-4">
                                <h4 class="text-lg font-semibold text-gray-800">Current Progress</h4>
                                <div class="space-y-3 mt-2">
                                    <div>
                                        <label for="pacing-days-remaining" class="block text-sm font-medium text-gray-600">Days Remaining in Month</label>
                                        <input type="number" id="pacing-days-remaining" class="styled-input mt-1 block w-full rounded-full p-2">
                                    </div>
                                    <div>
                                        <label for="pacing-amount-spent" class="block text-sm font-medium text-gray-600">Amount Spent So Far (DKK)</label>
                                        <input type="number" id="pacing-amount-spent" class="styled-input mt-1 block w-full rounded-full p-2" value="0">
                                    </div>
                                </div>
                            </div>
                            <div id="pacing-results" class="border-t border-gray-200/50 pt-4 space-y-2">
                            </div>
                        </div>
                        <div class="lg:col-span-2 relative">
                            <canvas id="pacing-chart" style="height: 400px;"></canvas>
                        </div>
                    </div>
                    <div class="mt-6 border-t border-gray-200/50 pt-6 text-center">
                        <button id="campaign-pacing-btn" class="flex items-center text-sm font-medium bg-white text-[#5248e2] border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-100 transition-colors shadow-sm mx-auto">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                            Campaign Pacing
                        </button>
                    </div>
                </div>
            </div>

            <div id="simulator-view" class="main-view is-inactive">
                <header class="mb-8 flex justify-between items-center">
                    <p class="text-gray-600 mt-1">Estimate results based on budget adjustments and historical data.</p>
                     <button class="back-to-dashboard-btn flex items-center text-sm font-medium bg-white text-[#5248e2] border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-100 transition-colors shadow-sm">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" transform="scale(-1, 1) translate(-24, 0)"></path></svg>
                        Back to app overview
                    </button>
                </header>
                <div class="glass-container p-6 rounded-xl">
                    <div id="simulator-file-drop-zone" class="data-upload-zone p-8 text-center rounded-xl cursor-pointer">
                        <input type="file" id="simulator-file-input" class="hidden" accept=".csv">
                        <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4 4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                        <p class="mt-4 text-sm text-gray-600"><span class="font-semibold text-[#5248e2]">Upload a file</span> or drag and drop</p>
                        <p class="text-xs text-gray-500">CSV files exported from Meta Ads</p>
                    </div>

                    <div id="simulator-main-content" class="hidden">
                        <!-- Time Aggregation Controls -->
                        <div class="flex justify-center items-center space-x-2 mb-8">
                            <span class="text-sm font-medium text-gray-600">Project by:</span>
                            <div id="simulator-time-aggregation-controls" class="inline-flex rounded-md shadow-sm" role="group">
                                <button type="button" data-period="Daily" class="time-agg-btn active px-4 py-2 text-sm font-medium rounded-l-full">Daily</button>
                                <button type="button" data-period="Weekly" class="time-agg-btn px-4 py-2 text-sm font-medium">Weekly</button>
                                <button type="button" data-period="Monthly" class="time-agg-btn px-4 py-2 text-sm font-medium rounded-r-full">Monthly</button>
                            </div>
                        </div>
                        
                        <!-- Controls & Summary Section -->
                        <div class="space-y-8 mb-12">
                            <div class="max-w-xl mx-auto">
                                <label for="simulator-spend-increase-slider" class="block text-sm font-medium text-gray-600 flex justify-between">
                                    <span>Spend Adjustment (%)</span>
                                    <span id="simulator-spend-increase-value" class="font-semibold text-gray-900">0%</span>
                                </label>
                                <input id="simulator-spend-increase-slider" type="range" min="-50" max="100" value="0" class="styled-range w-full mt-2">
                            </div>
                            <div id="simulator-summary-table" class="overflow-x-auto"></div>
                            <div id="simulator-event-mapper" class="space-y-2 p-4 bg-gray-100/30 rounded-xl max-w-3xl mx-auto text-center"></div>
                        </div>

                        <!-- Charts Section -->
                        <div class="space-y-8 border-t border-gray-200/50 dark:border-gray-700 pt-8">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="h-80 glass-container p-4 rounded-xl"><canvas id="simulator-revenue-scatter-plot"></canvas></div>
                                <div class="h-80 glass-container p-4 rounded-xl"><canvas id="simulator-transactions-scatter-plot"></canvas></div>
                                <div class="h-80 glass-container p-4 rounded-xl md:col-span-2"><canvas id="simulator-spend-transactions-chart"></canvas></div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="h-80 glass-container p-4 rounded-xl"><canvas id="simulator-revenue-chart"></canvas></div>
                                <div class="h-80 glass-container p-4 rounded-xl"><canvas id="simulator-cpa-chart"></canvas></div>
                            </div>

                            <div class="mt-6 border-t border-gray-200/50 dark:border-gray-700 pt-4">
                                <h4 class="text-lg font-semibold text-gray-800 text-center mb-4">Next Year's Projections</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="h-80 glass-container p-4 rounded-xl"><canvas id="simulator-future-revenue-chart"></canvas></div>
                                    <div class="h-80 glass-container p-4 rounded-xl"><canvas id="simulator-future-cpa-chart"></canvas></div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            
            <div id="incremental-reach-view" class="main-view is-inactive">
                <header class="mb-8 flex justify-between items-center">
                    <p class="text-gray-600 mt-1">Visualize the growth of unique reach over multiple campaign periods.</p>
                     <button class="back-to-dashboard-btn flex items-center text-sm font-medium bg-white text-[#5248e2] border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-100 transition-colors shadow-sm">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" transform="scale(-1, 1) translate(-24, 0)"></path></svg>
                        Back to app overview
                    </button>
                </header>
                <div class="space-y-8">
                    <!-- Input Table Section -->
                    <div class="glass-container p-6 rounded-xl">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold text-gray-900">Enter Campaign Data</h3>
                            <button id="add-reach-row-btn" class="flex items-center text-sm font-medium bg-white text-[#5248e2] border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-100 transition-colors shadow-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                  <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110 2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
                                </svg>
                                Add Row
                            </button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="text-left text-gray-500 uppercase">
                                    <tr>
                                        <th class="p-2">Month</th>
                                        <th class="p-2">Reach</th>
                                        <th class="p-2">Accumulated Reach</th>
                                        <th class="p-2">Incremental Reach</th>
                                        <th class="p-2">Normal Reach</th>
                                        <th class="p-2 w-12"></th>
                                    </tr>
                                </thead>
                                <tbody id="incremental-reach-input-body">
                                    <!-- Rows will be injected here by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
            
                    <!-- Chart Section -->
                    <div id="incremental-reach-chart-container" class="glass-container p-4 rounded-xl h-[32rem] hidden">
                        <canvas id="incremental-reach-chart"></canvas>
                    </div>
                    <div id="incremental-reach-placeholder" class="text-center py-16">
                        <p class="text-gray-500">Enter data above to generate the chart.</p>
                    </div>
                </div>
            </div>

            <div id="roas-goal-setter-view" class="main-view is-inactive">
                <header class="mb-8 flex justify-between items-center">
                    <p class="text-gray-600 mt-1">Calculate target CPA/CPC based on your ROAS goals and business metrics.</p>
                    <button class="back-to-dashboard-btn flex items-center text-sm font-medium bg-white text-[#5248e2] border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-100 transition-colors shadow-sm">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" transform="scale(-1, 1) translate(-24, 0)"></path></svg>
                        Back to app overview
                    </button>
                </header>

                <div class="grid grid-cols-1 lg:grid-cols-3 lg:gap-8">
                    <div class="lg:col-span-2 space-y-8">
                        <!-- Core Calculator -->
                        <div class="glass-container p-6 rounded-xl">
                            <h3 class="text-xl font-semibold text-gray-900 mb-4">Core Calculator</h3>
                            <div class="space-y-4">
                                <div>
                                    <label for="roas-goal-setter-roas-slider" class="block text-sm font-medium text-gray-600 flex justify-between">
                                        <span>Target ROAS</span><span id="roas-goal-setter-roas-value" class="font-semibold text-gray-900">8.00</span>
                                    </label>
                                    <div class="relative">
                                        <div id="roas-goal-setter-be-roas-marker" class="absolute top-1/2 -translate-y-1/2 w-1 h-4 bg-red-500 rounded-full z-10 hidden" data-tooltip=""></div>
                                        <input id="roas-goal-setter-roas-slider" type="range" min="1" max="20" value="8" step="0.1" class="styled-range w-full mt-2 relative">
                                    </div>
                                </div>
                                <div>
                                    <label for="roas-goal-setter-aov" class="block text-sm font-medium text-gray-600">Average Order Value (AOV) in DKK</label>
                                    <input type="number" id="roas-goal-setter-aov" value="550" class="styled-input mt-1 block w-full rounded-full p-2">
                                </div>
                                <div>
                                    <label for="roas-goal-setter-cvr-slider" class="block text-sm font-medium text-gray-600 flex justify-between">
                                        <span>Conversion Rate (CVR)</span><span id="roas-goal-setter-cvr-value" class="font-semibold text-gray-900">2.00%</span>
                                    </label>
                                    <input id="roas-goal-setter-cvr-slider" type="range" min="0.1" max="10" value="2" step="0.05" class="styled-range w-full mt-2">
                                </div>
                            </div>
                            <div class="mt-6 border-t border-gray-200/50 dark:border-gray-700 pt-4 grid grid-cols-2 gap-4">
                                <div class="summary-card text-center">
                                    <p class="text-sm text-gray-600">Max. CPA</p>
                                    <p id="roas-goal-setter-max-cpa" class="text-3xl font-bold text-gray-900 mt-1">DKK 0.00</p>
                                </div>
                                <div class="summary-card text-center">
                                    <p class="text-sm text-gray-600">Max. CPC</p>
                                    <p id="roas-goal-setter-max-cpc" class="text-3xl font-bold text-gray-900 mt-1">DKK 0.00</p>
                                </div>
                            </div>
                        </div>
                        <!-- Sensitivity Analysis -->
                        <div class="glass-container p-6 rounded-xl">
                            <h3 class="text-xl font-semibold text-gray-900 mb-6">Sensitivity Analysis</h3>
                            <div class="space-y-8">
                                <div>
                                    <p class="text-sm font-medium text-gray-600 text-center mb-2">Max CPA based on AOV 10%</p>
                                    <div class="relative h-4 bg-gray-200 dark:bg-gray-700 rounded-full correlation-graph-bar">
                                        <div id="cpa-gauge-marker" class="absolute top-1/2 -translate-y-1/2 w-5 h-5 bg-white rounded-full border-2 border-[#5248e2]" data-tooltip=""></div>
                                        <div class="absolute w-full flex justify-between text-xs text-gray-500 px-1 -bottom-5">
                                            <span id="cpa-gauge-low-label">DKK 0.00</span>
                                            <span id="cpa-gauge-high-label">DKK 0.00</span>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-600 text-center mb-2">Max CPC based on CVR 10%</p>
                                    <div class="relative h-4 bg-gray-200 dark:bg-gray-700 rounded-full correlation-graph-bar">
                                        <div id="cpc-gauge-marker" class="absolute top-1/2 -translate-y-1/2 w-5 h-5 bg-white rounded-full border-2 border-[#5248e2]" data-tooltip=""></div>
                                        <div class="absolute w-full flex justify-between text-xs text-gray-500 px-1 -bottom-5">
                                            <span id="cpc-gauge-low-label">DKK 0.00</span>
                                            <span id="cpc-gauge-high-label">DKK 0.00</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- LTV Multiplier -->
                        <div class="glass-container p-6 rounded-xl">
                            <h3 class="text-xl font-semibold text-gray-900 mb-4">LTV Multiplier</h3>
                            <div class="space-y-4">
                                <div>
                                    <label for="roas-goal-setter-repeat-rate-slider" class="block text-sm font-medium text-gray-600 flex justify-between"><span>Repeat Rate</span><span id="roas-goal-setter-repeat-rate-value">20.0%</span></label>
                                    <input id="roas-goal-setter-repeat-rate-slider" type="range" min="0" max="100" value="20" step="0.5" class="styled-range w-full mt-2">
                                </div>
                                <div>
                                    <label for="roas-goal-setter-avg-purchases-slider" class="block text-sm font-medium text-gray-600 flex justify-between"><span>Avg. Add. Purchases</span><span id="roas-goal-setter-avg-purchases-value">1.50</span></label>
                                    <input id="roas-goal-setter-avg-purchases-slider" type="range" min="0" max="10" value="1.5" step="0.1" class="styled-range w-full mt-2">
                                </div>
                                <div class="summary-card text-center !mt-6">
                                    <p class="text-sm text-gray-600">LTV-based Max CPA</p>
                                    <p id="roas-goal-setter-ltv-cpa" class="text-2xl font-bold text-gray-900 mt-1">DKK 0.00</p>
                                </div>
                            </div>
                        </div>
                        <!-- Break-Even Analysis -->
                        <div class="glass-container p-6 rounded-xl">
                            <h3 class="text-xl font-semibold text-gray-900 mb-4">Break-Even Analysis</h3>
                            <div class="space-y-4">
                                <div>
                                    <label for="roas-goal-setter-cogs-slider" class="block text-sm font-medium text-gray-600 flex justify-between"><span>Cost of Goods Sold (COGS)</span><span id="roas-goal-setter-cogs-value">40.0%</span></label>
                                    <input id="roas-goal-setter-cogs-slider" type="range" min="0" max="100" value="40" step="0.5" class="styled-range w-full mt-2">
                                </div>
                                <div class="grid grid-cols-2 gap-4 !mt-6">
                                    <div class="summary-card text-center p-3">
                                        <p class="text-xs text-gray-600">Profit Margin</p>
                                        <p id="roas-goal-setter-profit-margin" class="text-xl font-bold text-gray-900">0.0%</p>
                                    </div>
                                    <div class="summary-card text-center p-3">
                                        <p class="text-xs text-gray-600">Break-Even ROAS</p>
                                        <p id="roas-goal-setter-be-roas" class="text-xl font-bold text-gray-900">0.00</p>
                                    </div>
                                </div>
                                <div class="summary-card text-center !mt-4">
                                    <p id="roas-goal-setter-profit-per-tx" class="text-lg font-bold">Profit/Tx: DKK 0.00</p>
                                </div>
                            </div>
                        </div>
                        <!-- Historical Data -->
                        <div class="glass-container p-6 rounded-xl">
                            <h3 class="text-xl font-semibold text-gray-900 mb-4">Validate with Historical Data</h3>
                            <div id="roas-file-drop-zone" class="data-upload-zone p-8 text-center rounded-xl cursor-pointer">
                                <input type="file" id="roas-file-input" class="hidden" accept=".csv">
                                <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4 4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                                <p class="mt-4 text-sm text-gray-600"><span class="font-semibold text-[#5248e2]">Upload a Meta report</span> or drag & drop</p>
                                <p class="text-xs text-gray-500">CSV with AOV and CVR data</p>
                            </div>
                            <div id="roas-validation-chart-container" class="mt-6 hidden h-64">
                                <canvas id="roas-validation-chart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="lg:col-span-1">
                        <div id="roas-summary-box" class="sticky top-8 glass-container p-6 rounded-xl hidden lg:block">
                            <h3 class="text-xl font-semibold text-gray-900 mb-4 border-b border-gray-200/50 dark:border-gray-700 pb-3">Goal Summary</h3>
                            <div class="space-y-4">
                                <div>
                                    <h4 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Initial Goal</h4>
                                    <div class="mt-2 space-y-2">
                                        <div class="flex justify-between items-baseline">
                                            <span class="text-gray-600">Target ROAS</span>
                                            <span id="summary-target-roas" class="font-semibold text-lg text-gray-900">0.00</span>
                                        </div>
                                        <div class="flex justify-between items-baseline">
                                            <span class="text-gray-600">Max CPA</span>
                                            <span id="summary-max-cpa" class="font-semibold text-lg text-gray-900">DKK 0.00</span>
                                        </div>
                                        <div class="flex justify-between items-baseline">
                                            <span class="text-gray-600">Max CPC</span>
                                            <span id="summary-max-cpc" class="font-semibold text-lg text-gray-900">DKK 0.00</span>
                                        </div>
                                    </div>
                                </div>
                        
                                <div class="border-t border-gray-200/50 dark:border-gray-700 my-4"></div>
                        
                                <div>
                                    <h4 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Adjusted Goal</h4>
                                    <div class="mt-2 space-y-2">
                                         <div class="flex justify-between items-baseline">
                                            <span class="text-gray-600">Break-Even ROAS</span>
                                            <span id="summary-be-roas" class="font-semibold text-lg text-gray-900">0.00</span>
                                        </div>
                                        <div class="flex justify-between items-baseline">
                                            <span class="text-gray-600">LTV-Adjusted CPA</span>
                                            <span id="summary-ltv-cpa" class="font-semibold text-lg text-gray-900">DKK 0.00</span>
                                        </div>
                                        <div class="flex justify-between items-baseline">
                                            <span class="text-gray-600">Profit/Tx @ Target</span>
                                            <span id="summary-profit-per-tx" class="font-semibold text-lg text-gray-900">DKK 0.00</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pitch-assistant-view" class="main-view is-inactive">
                <header class="mb-8 flex justify-between items-center print-hide">
                    <p class="text-gray-600 mt-1">Generate key insights and visualizations for client pitches.</p>
                    <div class="flex items-center gap-4">
                        <button id="pitch-export-btn" class="flex items-center text-sm font-medium bg-white text-[#5248e2] border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-100 transition-colors shadow-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H6zm4 14a1 1 0 100-2 1 1 0 000 2zM8 7a1 1 0 012 0v4a1 1 0 11-2 0V7z" clip-rule="evenodd" /></svg>
                            Export to PDF
                        </button>
                        <button class="back-to-dashboard-btn flex items-center text-sm font-medium bg-white text-[#5248e2] border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-100 transition-colors shadow-sm">
                           <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" transform="scale(-1, 1) translate(-24, 0)"></path></svg>
                           Back to app overview
                        </button>
                    </div>
                </header>
            
                <!-- Upload Container -->
                <div id="pitch-upload-container">
                    <div class="glass-container p-6 rounded-xl">
                        <div id="pitch-file-drop-zone" class="data-upload-zone p-8 text-center rounded-xl cursor-pointer">
                            <input type="file" id="pitch-file-input" class="hidden" accept=".csv">
                            <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4 4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                            <p class="mt-4 text-sm text-gray-600"><span class="font-semibold text-[#5248e2]">Upload a file</span> or drag and drop</p>
                            <p class="text-xs text-gray-500">CSV files exported from Meta Ads</p>
                        </div>
                    </div>
                </div>
                
                <!-- Main Content (Dashboard) -->
                <div id="pitch-main-content" class="hidden space-y-8">
                     <!-- Period Over Period -->
                    <div class="glass-container p-6 rounded-xl">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold text-gray-900">Period-over-Period Performance</h3>
                            <div>
                                <label for="pitch-pop-select" class="text-sm font-medium text-gray-600 mr-2">Compare Last:</label>
                                <select id="pitch-pop-select" class="styled-select rounded-full p-2">
                                    <option value="7">7 Days</option>
                                    <option value="14">14 Days</option>
                                    <option value="30" selected>30 Days</option>
                                    <option value="90">90 Days</option>
                                </select>
                            </div>
                        </div>
                        <div id="pitch-pop-metrics" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <!-- PoP Metrics will be injected here -->
                        </div>
                    </div>
                    <!-- Key Metrics -->
                    <div class="glass-container p-6 rounded-xl">
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Overall Key Metrics</h3>
                        <div id="pitch-key-metrics" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            <!-- Metrics will be injected here -->
                        </div>
                    </div>

                    <!-- Key Takeaways -->
                    <div class="glass-container p-6 rounded-xl page-break-before">
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Key Takeaways</h3>
                        <ul id="pitch-takeaways-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Takeaways will be injected here -->
                        </ul>
                    </div>

                     <!-- Day of Week Analysis -->
                    <div class="glass-container p-6 rounded-xl">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold text-gray-900">Day of Week Analysis</h3>
                             <div>
                                <label for="pitch-dow-select" class="text-sm font-medium text-gray-600 mr-2">Metric:</label>
                                <select id="pitch-dow-select" class="styled-select rounded-full p-2">
                                    <option value="ROAS" selected>ROAS</option>
                                    <option value="CPA">CPA</option>
                                    <option value="Spend">Spend</option>
                                    <option value="Revenue">Revenue</option>
                                    <option value="Transactions">Transactions</option>
                                </select>
                            </div>
                        </div>
                        <div class="h-96"><canvas id="pitch-dow-chart"></canvas></div>
                    </div>
                    
                    <!-- Charts -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 page-break-before">
                        <div class="glass-container p-4 rounded-xl h-96"><canvas id="pitch-performance-chart"></canvas></div>
                        <div class="glass-container p-4 rounded-xl h-96"><canvas id="pitch-efficiency-chart"></canvas></div>
                        <div class="glass-container p-4 rounded-xl h-96"><canvas id="pitch-scatter-chart"></canvas></div>
                        <div class="glass-container p-4 rounded-xl h-96"><canvas id="pitch-weekly-spend-chart"></canvas></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="simulation-modal" class="fixed inset-0 z-40 hidden items-start justify-center p-4 pt-8 overflow-y-auto">
          <div id="simulation-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
          <div id="simulation-content" class="glass-container relative rounded-xl shadow-xl w-full max-w-7xl p-6 modal-content flex flex-col">
                  <div class="flex-shrink-0">
                      <div class="flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-4">
                          <h3 class="text-xl font-semibold text-gray-900">Budget Simulation</h3>
                          <button id="simulation-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
                      </div>
                      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                          <div class="space-y-4">
                              <div>
                                  <label for="spend-increase-slider" class="block text-sm font-medium text-gray-600 flex justify-between">
                                      <span>Spend Increase (%)</span>
                                      <span id="spend-increase-value">15%</span>
                                  </label>
                                  <input id="spend-increase-slider" type="range" min="-50" max="100" value="15" class="styled-range w-full mt-2">
                              </div>
                              <div id="simulation-results-table" class="overflow-x-auto"></div>
                              <div id="simulation-event-mapper" class="space-y-2 p-4 bg-gray-100/30 rounded-xl"></div>
                          </div>
                          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                              <div><canvas id="simulation-spend-transactions-chart"></canvas></div>
                              <div><canvas id="simulation-scatter-plot"></canvas></div>
                          </div>
                      </div>
                  </div>
                  <div class="flex-grow mt-6 border-t border-[#c8d2fe] pt-4">
                      <div class="flex justify-center items-center space-x-2 mb-4">
                          <span class="text-sm font-medium text-gray-600">Group Projections by:</span>
                          <div id="simulation-time-aggregation-controls" class="inline-flex rounded-md shadow-sm" role="group">
                              <button type="button" data-period="Daily" class="time-agg-btn active px-3 py-1.5 text-xs font-medium rounded-l-full">Daily</button>
                              <button type="button" data-period="Weekly" class="time-agg-btn px-3 py-1.5 text-xs font-medium">Weekly</button>
                              <button type="button" data-period="Monthly" class="time-agg-btn px-3 py-1.5 text-xs font-medium rounded-r-full">Monthly</button>
                          </div>
                      </div>
                      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 h-full" style="min-height: 40vh;">
                          <div class="lg:col-span-1"><canvas id="simulation-revenue-chart"></canvas></div>
                          <div class="lg-col-span-1"><canvas id="simulation-cpa-chart"></canvas></div>
                      </div>
                      <div class="mt-6 border-t border-[#c8d2fe] pt-4">
                          <h4 class="text-lg font-semibold text-gray-800 text-center mb-4">Next Year's Projections</h4>
                          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 h-full" style="min-height: 40vh;">
                              <div class="lg-col-span-1"><canvas id="simulation-future-revenue-chart"></canvas></div>
                              <div class="lg-col-span-1"><canvas id="simulation-future-cpa-chart"></canvas></div>
                          </div>
                      </div>
                  </div>
          </div>
    </div>
    <div id="correlations-modal" class="fixed inset-0 z-40 hidden items-center justify-center p-4">
        <div id="correlations-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
        <div id="correlations-content" class="glass-container relative rounded-xl shadow-xl w-full max-w-6xl p-6 modal-content">
             <div class="flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-4">
                 <h3 class="text-xl font-semibold text-gray-900">Metric Correlations</h3>
                 <button id="correlations-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="metric1-select" class="block text-sm font-medium text-gray-600">Metric 1</label>
                    <select id="metric1-select" class="styled-select mt-1 block w-full rounded-full p-2"></select>
                </div>
                 <div>
                    <label for="metric2-select" class="block text-sm font-medium text-gray-600">Metric 2</label>
                    <select id="metric2-select" class="styled-select mt-1 block w-full rounded-full p-2"></select>
                </div>
            </div>
             <div class="mt-6 flex justify-center items-center space-x-2">
                 <span class="text-sm font-medium text-gray-600">Group by:</span>
                 <div id="time-aggregation-controls" class="inline-flex rounded-md shadow-sm" role="group">
                     <button type="button" data-period="Daily" class="time-agg-btn active px-4 py-2 text-sm font-medium rounded-l-full">Daily</button>
                     <button type="button" data-period="Weekly" class="time-agg-btn px-4 py-2 text-sm font-medium">Weekly</button>
                     <button type="button" data-period="Monthly" class="time-agg-btn px-4 py-2 text-sm font-medium rounded-r-full">Monthly</button>
                 </div>
             </div>
            <div class="mt-6 text-center">
                <p class="text-sm text-gray-600">Correlation Coefficient</p>
                <p id="correlation-value" class="text-4xl font-bold text-gray-900 my-2">0.00</p>
                <div class="relative w-full h-4 bg-gray-200 rounded-full correlation-graph-bar mt-4">
                    <div id="correlation-marker" class="absolute top-1/2 -translate-y-1/2 w-5 h-5 bg-white rounded-full border-2 border-[#5248e2]" style="left: 50%;"></div>
                    <div class="absolute w-full flex justify-between text-xs text-gray-500 px-1 -bottom-5">
                        <span>-1</span>
                        <span>0</span>
                        <span>+1</span>
                    </div>
                </div>
            </div>
            <div id="correlation-charts-container" class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-6" style="height: 400px;">
                <div><canvas id="metric1-chart"></canvas></div>
                <div><canvas id="metric2-chart"></canvas></div>
            </div>
            <div id="data-period-indicator" class="text-center text-sm text-gray-500 mt-4"></div>
        </div>
    </div>
    <div id="best-worst-modal" class="fixed inset-0 z-40 hidden items-center justify-center p-4">
        <div id="best-worst-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
        <div id="best-worst-content" class="glass-container relative rounded-xl shadow-xl w-full max-w-6xl p-6 modal-content">
             <div class="flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-4">
                 <h3 class="text-xl font-semibold text-gray-900">Best & Worst Periods Analyzer</h3>
                 <button id="best-worst-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            </div>
            <div class="flex items-center space-x-6 mb-4">
                <div>
                    <label for="best-worst-metric-select" class="block text-sm font-medium text-gray-600">Analyze by Metric:</label>
                    <select id="best-worst-metric-select" class="styled-select mt-1 block w-full max-w-xs rounded-full p-2"></select>
                </div>
                <div>
                    <span class="block text-sm font-medium text-gray-600">Aggregate by:</span>
                    <div id="best-worst-time-aggregation-controls" class="inline-flex rounded-md shadow-sm mt-1" role="group">
                        <button type="button" data-period="Daily" class="time-agg-btn active px-4 py-2 text-sm font-medium rounded-l-full">Daily</button>
                        <button type="button" data-period="Weekly" class="time-agg-btn px-4 py-2 text-sm font-medium">Weekly</button>
                        <button type="button" data-period="Monthly" class="time-agg-btn px-4 py-2 text-sm font-medium rounded-r-full">Monthly</button>
                    </div>
                </div>
            </div>
            <div id="best-worst-results-container" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            </div>
        </div>
    </div>
    <div id="granulate-modal" class="fixed inset-0 z-40 hidden items-center justify-center p-4">
        <div id="granulate-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
        <div id="granulate-content" class="glass-container relative rounded-xl shadow-xl w-full max-w-4xl p-6 modal-content">
             <div class="flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-4">
                 <h3 class="text-xl font-semibold text-gray-900">Monthly Performance Granulation</h3>
                 <button id="granulate-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            </div>
            <div class="flex justify-between items-center space-x-4 mb-6">
                <div>
                    <label class="text-sm font-medium text-gray-600">Comparison Mode:</label>
                    <div id="granulate-mode-toggle" class="inline-flex rounded-full shadow-sm mt-1" role="group">
                        <button type="button" data-mode="monthOverMonth" class="comparison-mode-btn active px-4 py-2 text-sm font-medium rounded-l-full">Month-over-Month</button>
                        <button type="button" data-mode="custom" class="comparison-mode-btn px-4 py-2 text-sm font-medium rounded-r-full">Custom</button>
                    </div>
                </div>
                <div id="granulate-selectors-container" class="flex flex-wrap items-center gap-x-4 gap-y-2">
                    <!-- Selectors will be dynamically inserted here -->
                </div>
            </div>
            <div id="granulate-results-container">
            </div>
        </div>
    </div>
    <div id="metric-chart-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4">
        <div id="metric-chart-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
        <div id="metric-chart-content" class="glass-container relative rounded-xl shadow-xl w-full max-w-4xl p-6 modal-content">
             <div class="flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-4">
                 <h3 id="metric-chart-title" class="text-xl font-semibold text-gray-900">Metric Trend</h3>
                 <button id="metric-chart-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            </div>
            <div class="h-96">
                <canvas id="metric-chart-canvas"></canvas>
            </div>
        </div>
    </div>
    <div id="graph-analysis-modal" class="fixed inset-0 z-40 hidden items-start justify-center p-4 pt-8 overflow-y-auto">
        <div id="graph-analysis-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
        <div id="graph-analysis-content" class="glass-container relative rounded-xl shadow-xl w-full max-w-screen-2xl p-6 modal-content" style="min-height: 95vh;">
             <div class="flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-4">
                 <h3 class="text-xl font-semibold text-gray-900">Graph Analysis</h3>
                 <button id="graph-analysis-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            </div>
            <div class="flex justify-center items-center space-x-2 mb-4">
                 <span class="text-sm font-medium text-gray-600">Aggregate by:</span>
                 <div id="graph-analysis-time-aggregation-controls" class="inline-flex rounded-md shadow-sm" role="group">
                     <button type="button" data-period="Daily" class="time-agg-btn px-4 py-2 text-sm font-medium rounded-l-full">Daily</button>
                     <button type="button" data-period="Weekly" class="time-agg-btn active px-4 py-2 text-sm font-medium">Weekly</button>
                     <button type="button" data-period="Monthly" class="time-agg-btn px-4 py-2 text-sm font-medium rounded-r-full">Monthly</button>
                 </div>
             </div>
            <div id="graph-analysis-grid" class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6">
                <div class="chart-container relative lg:col-span-1 xl:col-span-2 h-96"><canvas id="graph-spend-vs-revenue"></canvas></div>
                <div class="chart-container relative lg:col-span-1 xl:col-span-2 h-96"><canvas id="graph-spend-vs-transactions"></canvas></div>
                <div class="chart-container relative h-80">
                    <div class="chart-controls absolute top-2 right-2 z-10 flex items-center space-x-1">
                        <div class="chart-type-toggle inline-flex rounded-md" role="group">
                            <button type="button" data-chart-id="graph-wow-spend" data-chart-type="bar" class="active p-1.5 text-xs font-medium rounded-l-full border border-gray-300 bg-white/70 hover:bg-gray-100/70">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-700 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z" /></svg>
                            </button>
                            <button type="button" data-chart-id="graph-wow-spend" data-chart-type="line" class="p-1.5 text-xs font-medium rounded-r-full border border-l-0 border-gray-300 bg-white/70 hover:bg-gray-100/70">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-700 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941" /></svg>
                            </button>
                        </div>
                        <button data-chart-id="graph-wow-spend" class="enlarge-chart-btn p-1.5 rounded-full border border-gray-300 bg-white/70 hover:bg-gray-100/70">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
                        </button>
                    </div>
                    <canvas id="graph-wow-spend"></canvas>
                </div>
                <div class="chart-container relative h-80">
                    <div class="chart-controls absolute top-2 right-2 z-10 flex items-center space-x-1">
                        <div class="chart-type-toggle inline-flex rounded-md" role="group">
                            <button type="button" data-chart-id="graph-wow-revenue" data-chart-type="bar" class="active p-1.5 text-xs font-medium rounded-l-full border border-gray-300 bg-white/70 hover:bg-gray-100/70">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-700 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z" /></svg>
                            </button>
                            <button type="button" data-chart-id="graph-wow-revenue" data-chart-type="line" class="p-1.5 text-xs font-medium rounded-r-full border border-l-0 border-gray-300 bg-white/70 hover:bg-gray-100/70">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-700 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941" /></svg>
                            </button>
                        </div>
                        <button data-chart-id="graph-wow-revenue" class="enlarge-chart-btn p-1.5 rounded-full border border-gray-300 bg-white/70 hover:bg-gray-100/70">
                           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
                        </button>
                    </div>
                    <canvas id="graph-wow-revenue"></canvas>
                </div>
                <div class="chart-container relative h-80">
                    <div class="chart-controls absolute top-2 right-2 z-10 flex items-center space-x-1">
                        <div class="chart-type-toggle inline-flex rounded-md" role="group">
                            <button type="button" data-chart-id="graph-wow-transactions" data-chart-type="bar" class="active p-1.5 text-xs font-medium rounded-l-full border border-gray-300 bg-white/70 hover:bg-gray-100/70">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-700 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z" /></svg>
                            </button>
                            <button type="button" data-chart-id="graph-wow-transactions" data-chart-type="line" class="p-1.5 text-xs font-medium rounded-r-full border border-l-0 border-gray-300 bg-white/70 hover:bg-gray-100/70">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-700 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941" /></svg>
                            </button>
                        </div>
                        <button data-chart-id="graph-wow-transactions" class="enlarge-chart-btn p-1.5 rounded-full border border-gray-300 bg-white/70 hover:bg-gray-100/70">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
                        </button>
                    </div>
                    <canvas id="graph-wow-transactions"></canvas>
                </div>
                <div class="chart-container relative h-80">
                    <div class="chart-controls absolute top-2 right-2 z-10 flex items-center space-x-1">
                        <div class="chart-type-toggle inline-flex rounded-md" role="group">
                            <button type="button" data-chart-id="graph-wow-roas" data-chart-type="bar" class="active p-1.5 text-xs font-medium rounded-l-full border border-gray-300 bg-white/70 hover:bg-gray-100/70">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-700 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z" /></svg>
                            </button>
                            <button type="button" data-chart-id="graph-wow-roas" data-chart-type="line" class="p-1.5 text-xs font-medium rounded-r-full border border-l-0 border-gray-300 bg-white/70 hover:bg-gray-100/70">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-700 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941" /></svg>
                            </button>
                        </div>
                        <button data-chart-id="graph-wow-roas" class="enlarge-chart-btn p-1.5 rounded-full border border-gray-300 bg-white/70 hover:bg-gray-100/70">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
                        </button>
                    </div>
                    <canvas id="graph-wow-roas"></canvas>
                </div>
                <div class="chart-container relative lg:col-span-1 xl:col-span-2 h-80">
                     <div class="chart-controls absolute top-2 right-2 z-10 flex items-center space-x-1">
                        <div class="chart-type-toggle inline-flex rounded-md" role="group">
                            <button type="button" data-chart-id="graph-wow-aov" data-chart-type="bar" class="active p-1.5 text-xs font-medium rounded-l-full border border-gray-300 bg-white/70 hover:bg-gray-100/70">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-700 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z" /></svg>
                            </button>
                            <button type="button" data-chart-id="graph-wow-aov" data-chart-type="line" class="p-1.5 text-xs font-medium rounded-r-full border border-l-0 border-gray-300 bg-white/70 hover:bg-gray-100/70">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-700 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941" /></svg>
                            </button>
                        </div>
                        <button data-chart-id="graph-wow-aov" class="enlarge-chart-btn p-1.5 rounded-full border border-gray-300 bg-white/70 hover:bg-gray-100/70">
                           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
                        </button>
                    </div>
                    <canvas id="graph-wow-aov"></canvas>
                </div>
                <div class="chart-container relative lg:col-span-1 xl:col-span-2 h-80">
                     <div class="chart-controls absolute top-2 right-2 z-10 flex items-center space-x-1">
                        <div class="chart-type-toggle inline-flex rounded-md" role="group">
                            <button type="button" data-chart-id="graph-wow-cpa" data-chart-type="bar" class="active p-1.5 text-xs font-medium rounded-l-full border border-gray-300 bg-white/70 hover:bg-gray-100/70">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-700 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z" /></svg>
                            </button>
                            <button type="button" data-chart-id="graph-wow-cpa" data-chart-type="line" class="p-1.5 text-xs font-medium rounded-r-full border border-l-0 border-gray-300 bg-white/70 hover:bg-gray-100/70">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-700 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941" /></svg>
                            </button>
                        </div>
                        <button data-chart-id="graph-wow-cpa" class="enlarge-chart-btn p-1.5 rounded-full border border-gray-300 bg-white/70 hover:bg-gray-100/70">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M20.25 20.25v-4.5m0 4.5h-4.5m4.5 0L15 15" /></svg>
                        </button>
                    </div>
                    <canvas id="graph-wow-cpa"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div id="enlarge-chart-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4">
        <div id="enlarge-chart-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-60 modal-backdrop"></div>
        <div id="enlarge-chart-content" class="glass-container relative rounded-xl shadow-xl w-full max-w-7xl p-6 modal-content" style="height: 90vh;">
             <div class="flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-4">
                 <h3 id="enlarge-chart-title" class="text-xl font-semibold text-gray-900">Enlarged Chart</h3>
                 <button id="enlarge-chart-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            </div>
            <div class="w-full h-[calc(100%-60px)]">
                <canvas id="enlarged-chart-canvas"></canvas>
            </div>
        </div>
    </div>
    <div id="takeaway-details-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4">
        <div id="takeaway-details-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
        <div id="takeaway-details-content" class="glass-container relative rounded-xl shadow-xl w-full max-w-4xl p-6 modal-content">
             <div class="flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-4">
                 <h3 id="takeaway-details-title" class="text-xl font-semibold text-gray-900">Takeaway Details</h3>
                 <button id="takeaway-details-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                <div>
                    <p id="takeaway-details-description" class="text-gray-800 dark:text-gray-300 leading-relaxed"></p>
                </div>
                <div class="h-80">
                    <canvas id="takeaway-details-chart"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div id="campaign-pacing-modal" class="fixed inset-0 z-40 hidden items-start justify-center p-4 pt-8 overflow-y-auto">
        <div id="campaign-pacing-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
        <div id="campaign-pacing-content" class="glass-container relative rounded-xl shadow-xl w-full max-w-6xl p-6 modal-content flex flex-col" style="min-height: 80vh;">
            <div class="flex-shrink-0 flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-4">
                 <h3 class="text-xl font-semibold text-gray-900">Campaign Pacing</h3>
                 <button id="campaign-pacing-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            </div>
            <div class="flex-shrink-0 px-4 pb-4 border-b border-[#c8d2fe] mb-4">
                <label for="pacing-modal-branding-slider" class="block text-sm font-medium text-gray-600 flex justify-between">
                    <span>Branding %</span><span id="pacing-modal-branding-value">20%</span>
                </label>
                <input id="pacing-modal-branding-slider" type="range" min="0" max="100" value="20" class="styled-range w-full mt-2">
            </div>
            <div class="flex-grow overflow-y-auto">
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="text-left text-gray-500 uppercase sticky top-0 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm">
                            <tr>
                                <th class="p-2 w-1/3">Campaign Name(s)</th>
                                <th class="p-2">Branding</th>
                                <th class="p-2">Spend Weight (%)</th>
                                <th class="p-2">Original Pacing (Daily)</th>
                                <th class="p-2">New Pacing (Daily)</th>
                                <th class="p-2 w-12"></th>
                            </tr>
                        </thead>
                        <tbody id="campaign-pacing-table-body">
                            <!-- Campaign rows will be injected here by JS -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="flex-shrink-0 mt-4 pt-4 border-t border-[#c8d2fe] flex justify-end items-center">
                <button id="add-campaign-row-btn" class="flex items-center text-sm font-medium bg-white text-[#5248e2] border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-100 transition-colors shadow-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110 2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
                    </svg>
                    Add Campaign
                </button>
            </div>
        </div>
    </div>
    <div id="file-library-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4">
        <div id="file-library-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
        <div id="file-library-content" class="glass-container relative rounded-xl shadow-xl w-full max-w-2xl p-6 modal-content">
             <div class="flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-4">
                 <h3 class="text-xl font-semibold text-gray-900">File Library</h3>
                 <button id="file-library-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            </div>
            <div id="file-library-list" class="space-y-2 max-h-96 overflow-y-auto pr-2">
                <!-- File items will be injected here -->
                <p class="text-gray-500 text-center py-8">No files uploaded yet.</p>
            </div>
            <div class="mt-6 flex justify-end">
                <button id="use-file-btn" class="bg-[#5248e2] text-white font-bold py-2 px-4 rounded-full disabled:bg-gray-200 disabled:text-gray-500 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors" disabled>
                    Use Selected File
                </button>
            </div>
        </div>
    </div>
    <div id="time-day-converter-modal" class="fixed inset-0 z-40 hidden items-center justify-center p-4">
        <div id="time-day-converter-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
        <div class="glass-container relative rounded-xl shadow-xl w-full max-w-3xl p-6 modal-content">
            <div class="flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-6">
                <h3 class="text-xl font-semibold text-gray-900">Calculate Duration Between Two Dates</h3>
                <button id="time-day-converter-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label for="tools-start-date" class="block text-sm font-medium text-gray-600">Start Date</label>
                    <input type="date" id="tools-start-date" class="styled-input mt-1 block w-full rounded-full p-2">
                </div>
                <div>
                    <label for="tools-end-date" class="block text-sm font-medium text-gray-600">End Date</label>
                    <input type="date" id="tools-end-date" class="styled-input mt-1 block w-full rounded-full p-2">
                </div>
            </div>
            <div class="mt-4">
                <label class="flex items-center cursor-pointer">
                    <input type="checkbox" id="tools-include-end-date" class="custom-checkbox mr-2">
                    <span class="text-sm text-gray-600">Include end date in calculation (1 day is added)</span>
                </label>
            </div>
    
            <div id="tools-result-container" class="mt-8 p-6 bg-gray-100/30 rounded-lg text-center hidden">
                <p class="text-sm text-gray-600">Result</p>
                <p id="tools-result-days" class="text-5xl font-bold text-gray-900 mt-2">-</p>
                <p id="tools-result-detailed" class="text-lg text-gray-700 mt-2">-</p>
            </div>
        </div>
    </div>
    <div id="percentage-calculator-modal" class="fixed inset-0 z-40 hidden items-center justify-center p-4">
        <div id="percentage-calculator-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
        <div class="glass-container relative rounded-xl shadow-xl w-full max-w-3xl p-6 modal-content">
            <div class="flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-6">
                <h3 class="text-xl font-semibold text-gray-900">Percentage Calculator</h3>
                <button id="percentage-calculator-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            </div>
            <div>
                <!-- Navigation Buttons -->
                <div class="flex justify-center items-center gap-4 mb-8">
                    <button data-tab="percent-of" class="percentage-tab active">What is X% of Y?</button>
                    <button data-tab="is-what-percent" class="percentage-tab">X is what % of Y?</button>
                    <button data-tab="percent-change" class="percentage-tab">Percentage Change</button>
                </div>
        
                <!-- Tab contents -->
                <div>
                    <!-- What is X% of Y -->
                    <div id="percent-of-tab" class="percentage-tab-content space-y-4">
                        <div class="flex flex-wrap items-center gap-4 text-lg">
                            <span>What is</span>
                            <input type="number" id="percent-of-x" class="styled-input rounded-full p-2 w-32 text-center" placeholder="X">
                            <span>% of</span>
                            <input type="number" id="percent-of-y" class="styled-input rounded-full p-2 w-32 text-center" placeholder="Y">
                            <span>?</span>
                        </div>
                        <div class="mt-4 p-4 bg-gray-100/30 rounded-lg text-center">
                            <p class="text-sm text-gray-600">Result</p>
                            <p id="percent-of-result" class="text-5xl font-bold text-gray-900 mt-2">-</p>
                        </div>
                    </div>
        
                    <!-- X is what percent of Y -->
                    <div id="is-what-percent-tab" class="percentage-tab-content hidden space-y-4">
                        <div class="flex flex-wrap items-center gap-4 text-lg">
                            <input type="number" id="is-what-x" class="styled-input rounded-full p-2 w-32 text-center" placeholder="X">
                            <span>is what percent of</span>
                            <input type="number" id="is-what-y" class="styled-input rounded-full p-2 w-32 text-center" placeholder="Y">
                            <span>?</span>
                        </div>
                        <div class="mt-4 p-4 bg-gray-100/30 rounded-lg text-center">
                            <p class="text-sm text-gray-600">Result</p>
                            <p id="is-what-result" class="text-5xl font-bold text-gray-900 mt-2">-</p>
                        </div>
                    </div>
        
                    <!-- What is the percentage change -->
                    <div id="percent-change-tab" class="percentage-tab-content hidden space-y-4">
                        <div class="flex flex-wrap items-center gap-4 text-lg">
                            <span>Percentage change from</span>
                            <input type="number" id="change-from-x" class="styled-input rounded-full p-2 w-32 text-center" placeholder="X">
                            <span>to</span>
                            <input type="number" id="change-to-y" class="styled-input rounded-full p-2 w-32 text-center" placeholder="Y">
                        </div>
                        <div class="mt-4 p-4 bg-gray-100/30 rounded-lg text-center">
                            <p class="text-sm text-gray-600">Result</p>
                            <p id="change-result" class="text-5xl font-bold text-gray-900 mt-2">-</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="schreiber-tool-modal" class="fixed inset-0 z-40 hidden items-center justify-center p-4">
        <div id="schreiber-tool-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-30 modal-backdrop"></div>
        <div class="glass-container relative rounded-xl shadow-xl w-full max-w-2xl p-6 modal-content">
             <div class="flex justify-between items-center border-b border-[#c8d2fe] pb-3 mb-6">
                <h3 class="text-xl font-semibold text-gray-900">Schreiber Tool</h3>
                <button id="schreiber-tool-close-btn" class="text-gray-500 hover:text-gray-800 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200/50 transition-colors">&times;</button>
            </div>
            <div class="space-y-6">
                <div>
                    <label for="schreiber-total-budget" class="block text-sm font-medium text-gray-600">Total Budget (DKK)</label>
                    <input type="number" id="schreiber-total-budget" class="styled-input mt-1 block w-full rounded-full p-2" placeholder="e.g., 100000">
                </div>
                <div class="space-y-4">
                     <div>
                        <label for="schreiber-meta-percentage" class="block text-sm font-medium text-gray-600 flex justify-between">
                            <span>Meta Percentage</span>
                            <span id="schreiber-meta-value">50%</span>
                        </label>
                        <input type="range" id="schreiber-meta-percentage" min="0" max="100" value="50" class="styled-range w-full mt-2">
                    </div>
                    <div>
                        <label for="schreiber-google-percentage" class="block text-sm font-medium text-gray-600 flex justify-between">
                            <span>Google Percentage</span>
                            <span id="schreiber-google-value">50%</span>
                        </label>
                        <input type="range" id="schreiber-google-percentage" min="0" max="100" value="50" class="styled-range w-full mt-2">
                    </div>
                </div>
                 <div class="border-t border-gray-200/50 pt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div id="schreiber-meta-result" class="summary-card text-center">
                         <p class="text-sm text-gray-600">Meta Spend Allocation</p>
                         <p class="text-2xl font-bold text-gray-900 mt-1">DKK 0.00</p>
                         <p class="text-xs text-gray-500 mt-1">DKK 0.00 / day</p>
                    </div>
                     <div id="schreiber-google-result" class="summary-card text-center">
                         <p class="text-sm text-gray-600">Google Spend Allocation</p>
                         <p class="text-2xl font-bold text-gray-900 mt-1">DKK 0.00</p>
                         <p class="text-xs text-gray-500 mt-1">DKK 0.00 / day</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="tooltip" role="tooltip" class="hidden absolute z-50 inline-block px-3 py-2 text-sm font-medium text-gray-800 bg-white rounded-xl shadow-lg border border-gray-200 transition-opacity duration-300 pointer-events-none max-w-xs"></div>
    
    <div id="top-bar" class="fixed bottom-0 left-0 w-full z-50 glass-container rounded-t-xl text-sm">
        <div class="max-w-7xl mx-auto px-8 py-3 flex justify-between items-center relative">
            <div id="top-bar-notification" class="absolute left-1/2 bottom-full mb-3 py-2 px-5 rounded-full text-sm font-semibold shadow-lg opacity-0 pointer-events-none"></div>
            <div class="flex items-center gap-3">
                <svg class="w-6 h-6 text-[#5248e2]" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L2 8.5V15.5L12 22L22 15.5V8.5L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                    <path d="M2 8.5L12 12L22 8.5" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                    <path d="M12 22V12" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                </svg>
                <span class="font-bold text-xl text-gray-800 font-rock">Late Night Commit</span>
            </div>
            
            <div class="absolute left-1/2 -translate-x-1/2 flex items-center gap-4">
                <span id="vibecoded-message" class="font-bold text-gray-500 opacity-0 transition-opacity duration-1000">Vibecoded with  by DBY</span>
            </div>

            <div class="flex items-center space-x-6 text-gray-600">
                <span>Version: <strong class="font-semibold text-gray-800">Espresso No. 1 (Single shot)</strong></span>
                <label id="screenshot-mode-toggle" for="screenshot-mode-checkbox" class="dark-mode-switch" aria-label="Toggle screenshot mode">
                    <input type="checkbox" id="screenshot-mode-checkbox" class="sr-only">
                    <span class="switch-track"></span>
                    <span class="switch-thumb">
                        <svg class="camera-icon-off" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z" /><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z" /></svg>
                        <svg class="camera-icon-on" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 9a3.75 3.75 0 100 7.5A3.75 3.75 0 0012 9Z" /><path fill-rule="evenodd" d="M9.344 3.071a49.52 49.52 0 015.312 0c.967.052 1.83.585 2.345 1.371l.702 1.118A4.5 4.5 0 0121.533 8h.217c.552 0 .998.447.998 1v9a1 1 0 01-1 1h-18a1 1 0 01-1-1v-9c0-.552.447-1 .998-1h.217a4.5 4.5 0 012.87-2.44l.702-1.118c.515-.786 1.378-1.319 2.345-1.371ZM12 6.75a5.25 5.25 0 100 10.5 5.25 5.25 0 000-10.5Z" clip-rule="evenodd" /></svg>
                    </span>
                </label>
                <label id="dark-mode-toggle" for="dark-mode-checkbox" class="dark-mode-switch" aria-label="Toggle dark mode">
                    <input type="checkbox" id="dark-mode-checkbox" class="sr-only">
                    <span class="switch-track"></span>
                    <span class="switch-thumb">
                        <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.364l-1.591 1.591M21 12h-2.25m-.364 6.364l-1.591-1.591M12 18.75V21m-4.95-4.243l-1.59-1.59M3 12h2.25m.364-6.364l1.59 1.59M12 12a4.5 4.5 0 000 9 4.5 4.5 0 000-9z" />
                        </svg>
                        <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
                        </svg>
                    </span>
                </label>
            </div>
        </div>
    </div>
<script type="module" src="/index.tsx"></script>
</body>
</html>